import{u as W,C as K,_ as J,a as X,b as U,c as q,d as z,e as M,f as I}from"./grist-MbRXcw06.js";import{c as E,d as g,x as j,o as i,b as f,w as t,q as w,s as G,v as Q,u as e,N as Y,a as D,e as a,X as Z,k as H,f as v,m as S,K as ee,z as te,G as se,A as P,i as o,U as ae,Y as le,y as oe,J as ie,Z as de,C as ne,L as re,Q as ue,g as ce,h as _,p as h,t as y,j as k,F as C,D as x,E as pe}from"./index-Cd370vpU.js";/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=E("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=E("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=E("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),T=g({__name:"Select",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},dir:{},name:{},autocomplete:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(u,{emit:d}){const s=j(u,d);return(p,b)=>(i(),f(e(Y),G(Q(e(s))),{default:t(()=>[w(p.$slots,"default")]),_:3},16))}}),R=g({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{default:"popper"},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(u,{emit:d}){const r=u,c=d,s=D(()=>{const{class:b,...A}=r;return A}),p=j(s,c);return(b,A)=>(i(),f(e(te),null,{default:t(()=>[a(e(ee),S({...e(p),...b.$attrs},{class:e(v)("relative z-50 max-h-96 min-w-32 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",b.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r.class)}),{default:t(()=>[a(e(ge)),a(e(Z),{class:H(e(v)("p-1",b.position==="popper"&&"h-[--radix-select-trigger-height] w-full min-w-[--radix-select-trigger-width]"))},{default:t(()=>[w(b.$slots,"default")]),_:3},8,["class"]),a(e(_e))]),_:3},16,["class"])]),_:3}))}}),B=g({__name:"SelectGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(u){const d=u,r=D(()=>{const{class:c,...s}=d;return s});return(c,s)=>(i(),f(e(se),S({class:e(v)("p-1 w-full",d.class)},r.value),{default:t(()=>[w(c.$slots,"default")]),_:3},16,["class"]))}}),ye={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},L=g({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},setup(u){const d=u,r=D(()=>{const{class:s,...p}=d;return p}),c=P(r);return(s,p)=>(i(),f(e(oe),S(e(c),{class:e(v)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",d.class)}),{default:t(()=>[o("span",ye,[a(e(ae),null,{default:t(()=>[a(e(fe),{class:"h-4 w-4"})]),_:1})]),a(e(le),null,{default:t(()=>[w(s.$slots,"default")]),_:3})]),_:3},16,["class"]))}}),_e=g({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(u){const d=u,r=D(()=>{const{class:s,...p}=d;return p}),c=P(r);return(s,p)=>(i(),f(e(ie),S(e(c),{class:e(v)("flex cursor-default items-center justify-center py-1",d.class)}),{default:t(()=>[w(s.$slots,"default",{},()=>[a(e(O),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),ge=g({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(u){const d=u,r=D(()=>{const{class:s,...p}=d;return p}),c=P(r);return(s,p)=>(i(),f(e(de),S(e(c),{class:e(v)("flex cursor-default items-center justify-center py-1",d.class)}),{default:t(()=>[w(s.$slots,"default",{},()=>[a(e(me),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),V=g({__name:"SelectTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(u){const d=u,r=D(()=>{const{class:s,...p}=d;return p}),c=P(r);return(s,p)=>(i(),f(e(re),S(e(c),{class:e(v)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start",d.class)}),{default:t(()=>[w(s.$slots,"default"),a(e(ne),{"as-child":""},{default:t(()=>[a(e(O),{class:"w-4 h-4 opacity-50 shrink-0"})]),_:1})]),_:3},16,["class"]))}}),F=g({__name:"SelectValue",props:{placeholder:{},asChild:{type:Boolean},as:{}},setup(u){const d=u;return(r,c)=>(i(),f(e(ue),G(Q(d)),{default:t(()=>[w(r.$slots,"default")]),_:3},16))}}),he={class:"grid gap-6"},be={class:"grid gap-6"},we={class:"grid gap-4"},ve={class:"grid gap-2"},Ce={key:0,class:"grid gap-6"},xe={class:"space-y-4"},De={class:"grid gap-4"},Se={class:"text-sm font-medium"},Ae={class:"text-xs text-muted-foreground"},$e={class:"grid gap-6"},Ne={class:"grid gap-4"},ke={class:"grid gap-2"},Te={key:0,class:"grid gap-6"},Re={class:"space-y-4"},Be={class:"grid gap-4"},Le={class:"text-sm font-medium"},Ve={class:"text-xs text-muted-foreground"},Fe=g({__name:"FlashcardConfiguration",setup(u,{expose:d}){const r=[{id:"question",label:"Question",field:"questionColumn",description:"The question text",type:"Text"},{id:"answer",label:"Answer",field:"answerColumn",description:"The answer text",type:"Text"},{id:"questionAudio",label:"Question Audio",field:"questionAudioColumn",description:"Audio file URL for the question",type:"Text"},{id:"questionAudioStart",label:"Question Audio Start",field:"questionAudioStartColumn",description:"Start time for question audio (ms)",type:"Numeric"},{id:"questionAudioEnd",label:"Question Audio End",field:"questionAudioEndColumn",description:"End time for question audio (ms)",type:"Numeric"},{id:"answerAudio",label:"Answer Audio",field:"answerAudioColumn",description:"Audio file URL for the answer",type:"Text"},{id:"answerAudioStart",label:"Answer Audio Start",field:"answerAudioStartColumn",description:"Start time for answer audio (ms)",type:"Numeric"},{id:"answerAudioEnd",label:"Answer Audio End",field:"answerAudioEndColumn",description:"End time for answer audio (ms)",type:"Numeric"},{id:"lastReview",label:"Last Review",field:"lastReviewColumn",description:"When the card was last reviewed",type:"DateTime"},{id:"state",label:"State",field:"stateColumn",description:"FSRS state of the card",type:"Numeric"},{id:"dueDate",label:"Due Date",field:"dueDateColumn",description:"When the card is due for review",type:"DateTime"},{id:"stability",label:"Stability",field:"stabilityColumn",description:"FSRS stability metric",type:"Numeric"},{id:"difficulty",label:"Difficulty",field:"difficultyColumn",description:"FSRS difficulty metric",type:"Numeric"},{id:"elapsedDays",label:"Elapsed Days",field:"elapsedDaysColumn",description:"Days since last review",type:"Numeric"},{id:"scheduledDays",label:"Scheduled Days",field:"scheduledDaysColumn",description:"Days until next review",type:"Numeric"},{id:"reps",label:"Repetitions",field:"repsColumn",description:"Number of times reviewed",type:"Numeric"},{id:"lapses",label:"Lapses",field:"lapsesColumn",description:"Number of times forgotten",type:"Numeric"}],c=[{id:"flashcardId",label:"Flashcard ID",field:"flashcardIdColumn",description:"Reference to the flashcard",type:"Ref"},{id:"reviewedAt",label:"Reviewed At",field:"reviewedAtColumn",description:"When the review occurred",type:"DateTime"},{id:"rating",label:"Rating",field:"ratingColumn",description:"User rating of the flashcard",type:"Numeric"},{id:"state",label:"FSRS State",field:"stateColumn",description:"Current FSRS state",type:"Numeric"},{id:"due",label:"Due Date",field:"dueColumn",description:"Next review date",type:"DateTime"},{id:"stability",label:"Stability",field:"stabilityColumn",description:"FSRS stability",type:"Numeric"},{id:"difficulty",label:"Difficulty",field:"difficultyColumn",description:"FSRS difficulty",type:"Numeric"},{id:"elapsedDays",label:"Elapsed Days",field:"elapsedDaysColumn",description:"Days since last review",type:"Numeric"},{id:"scheduledDays",label:"Scheduled Days",field:"scheduledDaysColumn",description:"Days until next review",type:"Numeric"},{id:"lastElapsedDays",label:"Last Elapsed Days",field:"lastElapsedDaysColumn",description:"Number of days between the last two reviews",type:"Numeric"}],s=W(),{initializeGrist:p,isGristReady:b}=pe(),A=($,n)=>$.filter(l=>{switch(n){case"Text":return l.type==="Text"||l.type==="Text:url";case"Numeric":return l.type==="Numeric"||l.type==="Int";case"DateTime":return l.type==="DateTime"||l.type==="Date";case"Ref":return l.type==="Ref";default:return!0}});return ce(async()=>{try{if(await p(),!b.value)throw new Error("Grist failed to initialize");await Promise.all([s.loadTables(),s.loadConfig()])}catch($){s.error=$ instanceof Error?$.message:"Failed to initialize configuration"}}),d({flashcardMappingTargets:r,reviewLogMappingTargets:c}),($,n)=>(i(),_("div",he,[e(s).error?(i(),f(e(X),{key:0,variant:"destructive"},{default:t(()=>[a(e(K),{class:"h-5 w-5"}),a(e(J),null,{default:t(()=>[h(y(e(s).error),1)]),_:1})]),_:1})):k("",!0),e(s).tables.length?(i(),f(e(I),{key:1,class:"bg-background"},{default:t(()=>[a(e(z),null,{default:t(()=>[a(e(U),null,{default:t(()=>n[2]||(n[2]=[h("Flashcard Configuration")])),_:1}),a(e(q),null,{default:t(()=>n[3]||(n[3]=[h("Configure your flashcard table")])),_:1})]),_:1}),a(e(M),null,{default:t(()=>[o("div",be,[o("div",we,[o("div",ve,[n[4]||(n[4]=o("label",{class:"text-sm font-medium"},"Flashcard Table",-1)),a(e(T),{modelValue:e(s).config.flashcardTable,"onUpdate:modelValue":[n[0]||(n[0]=l=>e(s).config.flashcardTable=l),e(s).handleFlashcardTableChange]},{default:t(()=>[a(e(V),null,{default:t(()=>[a(e(F),{placeholder:"Choose flashcard table"})]),_:1}),a(e(R),{class:"max-h-[200px]"},{default:t(()=>[a(e(B),null,{default:t(()=>[(i(!0),_(C,null,x(e(s).tables,l=>(i(),f(e(L),{key:l.id,value:l.id},{default:t(()=>[h(y(l.id),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])])]),e(s).flashcardColumns.length?(i(),_("div",Ce,[o("div",xe,[n[5]||(n[5]=o("div",{class:"flex items-center justify-between"},[o("h4",{class:"font-medium"},"Flashcard Column Mapping")],-1)),o("div",De,[(i(),_(C,null,x(r,l=>{var N;return o("div",{key:l.id,class:"grid gap-2"},[o("label",Se,y(l.label),1),a(e(T),{"model-value":(N=e(s).getMappedFlashcardColumn(l.field))==null?void 0:N.id,"onUpdate:modelValue":m=>e(s).updateFlashcardMapping(l.field,m)},{default:t(()=>[a(e(V),null,{default:t(()=>[a(e(F),{placeholder:`Choose a ${l.type.toLowerCase()} column`},null,8,["placeholder"])]),_:2},1024),a(e(R),{class:"max-h-[200px]"},{default:t(()=>[a(e(B),null,{default:t(()=>[(i(!0),_(C,null,x(A(e(s).flashcardColumns,l.type),m=>(i(),f(e(L),{key:m.id,value:m.id},{default:t(()=>[h(y(m.fields.label)+" ("+y(m.type)+") ",1)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["model-value","onUpdate:modelValue"]),o("p",Ae,y(l.description),1)])}),64))])])])):k("",!0)])]),_:1})]),_:1})):k("",!0),e(s).tables.length?(i(),f(e(I),{key:2,class:"bg-background"},{default:t(()=>[a(e(z),null,{default:t(()=>[a(e(U),null,{default:t(()=>n[6]||(n[6]=[h("Review Log Configuration")])),_:1}),a(e(q),null,{default:t(()=>n[7]||(n[7]=[h("Configure your review log table")])),_:1})]),_:1}),a(e(M),null,{default:t(()=>[o("div",$e,[o("div",Ne,[o("div",ke,[n[8]||(n[8]=o("label",{class:"text-sm font-medium"},"Review Log Table",-1)),a(e(T),{modelValue:e(s).config.reviewLogTable,"onUpdate:modelValue":[n[1]||(n[1]=l=>e(s).config.reviewLogTable=l),e(s).handleReviewLogTableChange]},{default:t(()=>[a(e(V),null,{default:t(()=>[a(e(F),{placeholder:"Choose review log table"})]),_:1}),a(e(R),{class:"max-h-[200px]"},{default:t(()=>[a(e(B),null,{default:t(()=>[(i(!0),_(C,null,x(e(s).tables,l=>(i(),f(e(L),{key:l.id,value:l.id},{default:t(()=>[h(y(l.id),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])])]),e(s).reviewLogColumns.length?(i(),_("div",Te,[o("div",Re,[n[9]||(n[9]=o("div",{class:"flex items-center justify-between"},[o("h4",{class:"font-medium"},"Review Log Column Mapping")],-1)),o("div",Be,[(i(),_(C,null,x(c,l=>{var N;return o("div",{key:l.id,class:"grid gap-2"},[o("label",Le,y(l.label),1),a(e(T),{"model-value":(N=e(s).getMappedReviewLogColumn(l.field))==null?void 0:N.id,"onUpdate:modelValue":m=>e(s).updateMapping(l.field,m)},{default:t(()=>[a(e(V),null,{default:t(()=>[a(e(F),{placeholder:`Choose a ${l.type.toLowerCase()} column`},null,8,["placeholder"])]),_:2},1024),a(e(R),{class:"max-h-[200px]"},{default:t(()=>[a(e(B),null,{default:t(()=>[(i(!0),_(C,null,x(A(e(s).reviewLogColumns,l.type),m=>(i(),f(e(L),{key:m.id,value:m.id},{default:t(()=>[h(y(m.fields.label)+" ("+y(m.type)+") ",1)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["model-value","onUpdate:modelValue"]),o("p",Ve,y(l.description),1)])}),64))])])])):k("",!0)])]),_:1})]),_:1})):k("",!0)]))}}),Pe={class:"container mx-auto py-8 px-4 md:px-6"},Ee={class:"flex flex-col gap-8"},Ue={class:"grid gap-6"},Me=g({__name:"ConfigurationView",setup(u){return(d,r)=>(i(),_("div",Pe,[o("div",Ee,[r[0]||(r[0]=o("div",{class:"flex flex-col gap-2"},[o("h1",{class:"scroll-m-20 text-4xl font-extrabold tracking-tight text-foreground lg:text-5xl"}," Configuration "),o("p",{class:"text-xl text-muted-foreground"}," Configure your flashcard settings and manage review log mappings. ")],-1)),o("div",Ue,[a(Fe)])])]))}});export{Me as default};
